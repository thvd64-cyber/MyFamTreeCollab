<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Template - MyFamTreeCollab</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f8f8f8; }
        main .container { background: #fff; padding: 20px; border-radius: 8px; max-width: 1100px; margin: 20px auto; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
        button { padding: 10px 20px; background: #007bff; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #status { margin-top: 15px; padding: 12px; border-radius: 6px; color: #333; }
        /* Page title styling */
        .page-title { max-width: 1100px; margin: 40px auto 20px auto; padding: 0 20px; }
        .page-title h2 { margin-bottom: 10px; font-size: 1.8rem; font-weight: 600; }
        .page-title p { color: #555; font-size: 1rem; line-height: 1.5; }
    </style>
</head>
<body>

<!-- ======================= NAVBAR ======================= -->
<div id="navbar-placeholder"></div>
<script>
fetch('../navbar.html')
    .then(response => response.text())
    .then(data => {
        document.getElementById('navbar-placeholder').innerHTML = data;
        // Optioneel: pagina-specifieke navbar styling
        const navbar = document.getElementById('navbar-placeholder');
        navbar.querySelectorAll('a').forEach(link => link.style.color = '#fff');
    });
</script>

<!-- ======================= PAGE TITLE ======================= -->
<section class="page-title">
    <h2>CSV Template</h2>
    <p>Gebruik deze downloadbare CSV om stamboomdata te importeren in MyFamTreeCollab. Alle kolomnamen worden herkend en het template is volledig conform het huidige schema. ID’s volgen de idGenerator-logica.</p>
</section>

<!-- ======================= MAIN CONTENT ======================= -->
<main>
    <div class="container">
        <section>
            <h3>Voorbeeldrecord (alleen visueel)</h3>
            <p>
                ID: JJVMMHoofdID | Doopnaam: Jan | Roepnaam: Jan | Geslacht: M | Geboortedatum: 1980-01-01 | 
                Geboorteplaats: Amsterdam | PartnerID: (leeg)
            </p>
        </section>

        <button id="downloadBtn">Download CSV Voorbeeld</button>
        <p id="status"></p>
    </div>
</main>

<!-- ======================= FOOTER ======================= -->
<footer>
    <p>&copy; 2026 MyFamTreeCollab website</p>
</footer>

<!-- ======================= PAGE-SPECIFIC JS ======================= -->
<script>
const downloadBtn = document.getElementById('downloadBtn');
const status = document.getElementById('status');

downloadBtn.addEventListener('click', () => {
    if (!window.StamboomSchema) {
        status.textContent = "❌ Fout: StamboomSchema niet geladen.";
        return;
    }

    const headers = StamboomSchema.header();
    const emptyRow = Array(StamboomSchema.count()).fill("").join(",");
    const csvContent = "\uFEFF" + `${headers}\n${emptyRow}\n${emptyRow}`; // BOM toegevoegd voor Excel

    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "Stamboom_template.csv";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    status.textContent = "✅ CSV template succesvol gedownload!";
});
</script>

</body>
</html>
